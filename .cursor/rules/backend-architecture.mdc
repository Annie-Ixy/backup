---
description: 
globs: 
alwaysApply: false
---
# 后端架构指南

## 后端概览
后端基于Node.js + Express构建，提供简历处理和AI分析的API服务。

## 核心文件
- **主服务器**: [server/index.js](mdc:server/index.js) - 包含所有API路由和核心逻辑
- **配置文件**: [server/config.js](mdc:server/config.js) - 服务器配置和环境变量
- **依赖配置**: [server/package.json](mdc:server/package.json) - 后端依赖管理

## 主要功能模块

### 1. 文件上传处理
- 使用Multer处理ZIP文件上传
- 支持中文文件名编码处理
- 文件大小限制: 100MB

### 2. ZIP文件解析
- 使用Yauzl库解压ZIP文件
- 提取其中的PDF简历文件
- 处理文件名编码问题

### 3. PDF文件解析
- 使用pdf-parse库提取PDF文本内容
- 支持中文简历内容解析

### 4. AI简历分析
- 集成OpenAI GPT-4 API
- 智能分析候选人技能、经验和匹配度
- 生成结构化的评分和排名

### 5. 数据缓存
- 使用内存Map存储处理结果
- 支持批量处理和进度跟踪

## API端点
```
POST /api/upload     # 上传ZIP文件
POST /api/analyze    # 分析简历
GET  /api/candidates # 获取候选人列表
GET  /api/progress   # 获取处理进度
```

## 环境配置
需要在server目录下创建.env文件:
```
OPENAI_API_KEY=your_api_key
PORT=5000
NODE_ENV=development
```

## 关键依赖
- express: Web框架
- multer: 文件上传
- yauzl: ZIP文件处理
- pdf-parse: PDF解析
- openai: AI分析
- cors: 跨域支持

